syntax = "proto3";

package v1.imageservice;

import "common/types.proto";

option go_package = "github.com/vladgrskkh/movie-recommender-contracts/v1/imageservice;imageservice";

service Image {
    rpc Upload (stream ImageUploadRequest) returns (ImageUploadResponse);
    rpc Get (common.Image) returns (stream ImageGetResponse);
    rpc Delete (common.Image) returns (ImageDeleteResponse);
}

message ImageChunk {
    bytes chunk = 1;
}

message ImageUploadRequest {
    oneof payload {
        ImageChunk chunk = 1;
        common.Image image = 2;
    }
}

message ImageUploadResponse {
    common.Image image = 1;
    string message = 2;
}

message ImageGetResponse {
    oneof payload {
        ImageChunk chunk = 1;
        string message = 2;
    }
}

message ImageDeleteResponse {
    string message = 1;
}
